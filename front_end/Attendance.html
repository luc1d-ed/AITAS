<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance</title>
    <link rel="icon" href="./resources/icons/sxd-logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="./resources/stylesheets/Attendance.css">
</head>

<body>
  <div class="title">
    <img class="logo-img" src="./resources/icons/sxd-logo.png">
    <h1>St. Xavier's School, Doranda <br> <span class ="subheading">IT Exhibition - 2023</span></h1>
    <div class="date">
      <span id="current-date"></span>
    </div>
  </div>

  <div class="bar">
    <a href="/">
      <div class="home-bar">
        <img class="bar-icon" src="./resources/icons/home.png"></img>
        <span>Home</span>
      </div>
    </a>
    <a href="/Attendance">
      <div class="attendance-bar">
        <img class="bar-icon" src="./resources/icons/attendance.png"></img>
        <span>Attendance</span>
      </div>
    </a>
    <a href="/Graph">
      <div class="graph-bar">
        <img class="bar-icon" src="./resources/icons/graph.png"></img>
        <span>Graph</span>
      </div>
    </a>
  </div>

  <div class="students" id="students">
    <!-- Student photos will be added here -->
  </div>

  <script>
    const currentDate = new Date();
    const day = currentDate.getDate().toString().padStart(2, '0');
    const month = currentDate.toLocaleString('default', { month: 'short' }).toUpperCase();
    document.getElementById('current-date').innerHTML = `${day}<br>${month}`;

    fetch('/photos', { method: 'POST' })
      .then(response => response.json())
      .then(photos => {
        const studentsDiv = document.getElementById('students');
        photos.forEach(photo => {
          const card = document.createElement('div');
          card.classList.add('card');

          const imgCard = document.createElement('div');
          imgCard.classList.add('img-card');

          const img = document.createElement('img');
          img.classList.add('student-img');
          img.src = photo;
          imgCard.appendChild(img);

          const nameCard = document.createElement('div');
          nameCard.classList.add('name-card');
          nameCard.innerHTML = '<span class="student-name">Ayush Samuel</span>';

          card.appendChild(imgCard);
          card.appendChild(nameCard);
          studentsDiv.appendChild(card);
        });
      });
  </script>

</body>
</html>